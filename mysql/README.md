---
title: mysql
date: 2022/02/07 19:15:25  
tags:
- 数据库
- mysql
- 关系型
categories: mysql
thumbnail: https://tse4-mm.cn.bing.net/th/id/OIP-C.li-axhLAyInOFKltSqQM5AHaEK?w=305&h=180&c=7&r=0&o=5&pid=1.7
cover: https://tse4-mm.cn.bing.net/th/id/OIP-C.li-axhLAyInOFKltSqQM5AHaEK?w=305&h=180&c=7&r=0&o=5&pid=1.7
---







# 数据库概述与mysql安装篇

## 数据库概述

### 为什么要使用数据库

持久化 （persistence）：把数据保存到可掉电式存储设备中以供之后使用。大多数情况下，特别是企业级应用数据持久化意味着将内存中的数据保存到硬盘上加以”固化”，而持久化的实现过程大多通过各种关系数据库来完成

持久化的主要作用是将内存中的数据存储在关系型数据库中，当然也可以存储在磁盘文件、XM数据文件中。

![image-20220207201243636](https://raw.githubusercontent.com/xgdwudi/images/master/img/image-20220207201243636.png)

### 数据库与数据库管理系统

####     数据库的相关概念

DB：数据库（Database)

即存储数据的“仓库”，其本质是一个文件系统。它保存了一系列有组织的数据

DBMS：数据库管理系统（Database Management System）

是—种操纵和管理数据库的大型软件，用于建立、使用和维护数据库，对数据库进行统-管理和控制。用户通过数据库管理系统访问数据库中表内的数据。

SQL：结构化查询语言（Structured Query Language）

专门用来与数据库通信的语言。

#### 	数据库与数据库管理系统的关系

数据库管理系统DBMS可以管理多个数据库，一般开发人员会针对每一个应用创建一个数据库。为保存应用中实体的数据，一般会在数据库创建多个表，以保存程序中实体用户的数据。

数据库管理系统、数据库和表的关系如图所示

![image-20220207202436139](https://raw.githubusercontent.com/xgdwudi/images/master/img/image-20220207202436139.png)

#### 	常见的数据库管理系统排名（DBMS）

目前互联网上常见的数据库管理软件有 Oracle、MySQL、MS SQL Server、DB2、PostgreSQL、Aces、Sybase、nformⅸx这几种。以下是2021年DB-Engines Ranking对各数据库受欢迎程度进行调查后的统计结果：（查看数据库最新排名：https://db-engines.com/en/ranking）

![image-20220207202935572](https://raw.githubusercontent.com/xgdwudi/images/master/img/image-20220207202935572.png)

#### 常见的数据库介绍

Oracle

1979年，Oracle2诞生，它是第一个商用的 RDBMS（关系型数据库管理系统）。随着 Oracle软件的名气越来越大，公司也改气叫 Oracle公司

2007年，总计85亿美金收购 BEA Systems

2009年，总计74亿美金收购SUN。此前的2008年，SUN以10亿美金收购MsQL。意味着 Oracle同时拥有了 MySQL的管理权，至此 Oracle在数据库领域中成为绝对的领导者。

2013年，甲骨文超越BM，成为继 Microsoft后全球第二大软件公司。

如今σracle的年收入达到了400亿美金，足以证明商用（收费）数据库软件的价值

SQL Server

SQL Server是微软开发的大型商业数据库，诞生于1989年。C#、net等语言常使用，与 WinNt完全集成，也可以很好地与 Microsoft backoffice产品集成。

DB2

BM公司的数据库产品，收费的。常应用在银行系统中

PostgreSQL 

PostgreSQL的稳定性极强，最符合SQL标准，开放源码，具备商业级DBMS质量。PG对数据量大的文本以及SQL处理较快。

SyBase

已经淡出历史舞台。提供了一个非常专业数据建模的工具 PowerDesigner

SQLite

嵌入式的小型数据库，应用在手机端。零配置，sQlite3不用安装，不用配置，不用启动，关闭或者配置数据库实例。当系统崩溃后不用做任何恢复操作，再下次使用数据库的时候自动恢复。

informix 

IBM公司出品，取自 Information和υnⅸ的结合，它是第一个被移植到 Linux上的商业数据库产品。仅运行于unix/Linux平台，命令行操作。性能较高，支持集群，适应于安全性要求极高的系统，尤其是银行，证券系统的应用。

### MYSQL介绍

#### 概述

- MySQL是一个开放源代码的关系型据库管理系统，由瑞典 MySQL AB（创始人 Michael widenius）公司1995年开发，迅速成为开源数据库的No.1
- 2008被Sun收购（10亿美金），2009年Sun被0rac1e收购。MariaDB应运而生。（MySQL的创造者担心sQL有闭源的风险，因此创建了 MySQL I的分支项目 MariaDB）
- MySQL6x版本之后分为社区版和商业版
- MySQL是一种关联数据库管理系统，将数据保存在不同的表中，而不是将所有数据放在一个大仓库内，这样就增加了速度并提高了灵活性。
- MySQL是开源的，所以你不需要支付额外的费用
- MySQL是可以定制的，采用了GPL（GNU General Public License）协议，你可以修改源码来开发自己的MySQL系统。
- MySQL支持大型的数据库。可以处理拥有上千万条记录的大型数据库。
- MySQL支持大型数据库，支持5000万条记录的数据仓库，32位系统表文件最大可支持4GB，64位系统支持最大的表文件为8TB。
- MySQL使用标准的SQL数据语言形式。
- MySQL可以允许运行于多个系统上，并且支持多种语言。这些编程语言包括C、C++、Python、Java、Perl、 PHP和Ruby等。

### RDBMS 与非RDBMS

从排名中我们能看出来，关系型数据库绝对是DBMS的主流，其中使用最多的DBMS分别是 Oracle、MySQL和SQL Server。这些都是关系型数据库（RDBMS）

#### 关系型数据库（RDBMS）

实质

- 这种类型的数据库是最古老的数据库类型Ⅰ关系型数据库模型是把复杂的数据结构归结为简单的二元关系
  （即二维表格形式）![image-20220207211433549](https://raw.githubusercontent.com/xgdwudi/images/master/img/image-20220207211433549.png)
- 关系型数据库以行（row）和列（column）的形式存储数据，以便于用户理解。这一系列的行和列被称为表table），一组表组成了一个库（database)
- 表与表之间的数据记录有关系 relationship）。现实世界中的各种实体以及实体之间的各种联系均用关系模型来表示。关系型数据库，就是建立在关系模型基础上的数据库
- sqL就是关系型数据库的查询语言。

![image-20220207211937074](https://raw.githubusercontent.com/xgdwudi/images/master/img/image-20220207211937074.png)

优势

- 复杂查询
  可以用SQL语句方便的在一个表以及多个表之间做非常复杂的数据查询
- 事务支持
  使得对于安全性能很高的数据访问要求得以实现

#### 非关系型数据库（RDBMS）

**介绍**

非关系型数据库，可看成传统关系型数据库的功能阉割版本，基于键值对存储数据，不需要经过SQL层的解析，性能非常高。同时，通过减少不常用的功能，进一步提高性能。

目前基本上大部分主流的非关系型数据库都是免费的。

**有哪些非关系型数据库**

相比于sqL，NosαL泛指非关系型数据库，包括了榜单上的键值型数据库、文档型数据库、搜索引擎和列存储等，除此以外还包括图形数据库。也只有用 NoSQL一词才能将这些技术囊括进来键值型数据库

键值型数据库

键值型数据库通过 Key-Value键值的方式来存储数据，其中Key和 Value可以是简单的对象，也可以是复杂的对象。Key作为唯一的标识符，优点是査找速度快，在这方面明显优于关系型数据库，缺点是无法像关系型数据库样使用条件过滤（比如 WHERE），如果你不知道去哪里找数据，就要遍历所有的键，这就会消耗大量的计算。

键值型数据库典型的使用场景是作为内存缓存。Redis是最流行的键值型数据库。

![image-20220208215224156](https://raw.githubusercontent.com/xgdwudi/images/master/img/image-20220208215224156.png)

**文档型数据库**

此类数据库可存放并获取文档，可以是XML、JSON等格式。在数据库中文档作为处理信息的基本单位，一个文档就相当于条记录。文档数据库所存放的文档，就相当于键值数据库所存放的“值”。MonεoDB是最流行的文档型数据库。此外，还有 CouchDB等

**搜索引擎数据库**
虽然关系型数据库采用了索引提升检索效率，但是针对全文索引效率却较低。搜索引擎数据库是应用在搜索引擎领域的数据存储形式，由于搜索引擎会爬取大量的数据，并以特定的格式进行存储，这样在检索的时候才能保证性能最优。核心原理是“倒排索引”。
典型产品：So；、Elasticsearch、Splunk等。

**列式数据库**

列式数据库是相对于行式存储的数据库，Oracle、MySQL、SQL Server等数据库都是采用的行式存储（RoW based），而列式数据库是将数据按照列存储到数据库中，这样做的好处是可以大量降低系统的o，适合于分布式文件系统，不足在于功能相对有限。典型产品：HBase等。

**图形数据库**

图形数据库，利用了图这种数据结构存储了实体（对象）之间的关系。图形数据库最典型的例子就是社交网络中人与人的关系，数据模型主要是以节点和边（关系）来实现，特点在于能高效地解决复杂的关系问题。

图形数据库顾名思义，就是一种存储图形关系的数据库。它利用了图这种数据结构存储了实体（对象）之间的关系。关系型数据用于存储明确关系的数据，但对于复杂关系的数据存储却有些力不从心。如社交网络中人物之间的关系，如果用关系型数据库则非常复杂，用图形数据库将非常简单。典型产品：Neo4J、IηfoGi等。

### 关系型数据库设计规则

- 关系型数据库的典型数据结构就是数据表，这些数据表的组成都是结构化的（Structured）
- 将数据放到表中，表再放到库中。
- 一个数据库中可以有多个表，每个表都有一个名字，用来标识自己。表名具有唯一性。
- 表具有一些特性，这些特性定义了数据在表中如何存储，类似Java和 Python中“类”的设计。

表、记录、字段

- E-R（entity-relationship，实体-联系）模型中有三个主要概念是：实体集、属性、联系集一个实体集（class））对应于数据库中的一个表（table），
- 一个实体（（instance）则对应于数据库表中的一行
  （row），也称为一条记录（record）。—个属性（attribute）对应于数据库表中的-列（column），也称为一个字段（field）。

![image-20220208221615613](https://raw.githubusercontent.com/xgdwudi/images/master/img/image-20220208221615613.png)

ORM  (Object Relational Mapping)

**表的关联关系**

- 表与表之间的数据记录有关系（relationship）。现实世界中的各种实体以及实体之间的各种联系均用关系模型来表示。
- 四种：一对一关联、一对多关联、多对多关联、自我引用

**一对一关联**（one-to-one）

- 在实际的开发中应用不多，因为一对一可以创建成一张表。

- 举例：设计学生表：学号、姓名、手机号码、班级、系别、身份证号码、家庭住址、籍贯、紧急联系人

  - 拆为两个表：两个表的记录是—对应关系
  - 基础信息表（常用信息）：学号、姓名、手机号码、班级、系别
  - 档案信息表（不常用信息）：学号、身份证号码、家庭住址、籍贯、紧急联系人、

- 两种建表原则：

  - 外键唯一：主表的主键和从表的外键（唯一），形成主外键关系，外键唯一。
  - 外键是主键：主表的主键和从表的主键，形成主外键关系。

  ![image-20220208222437378](https://raw.githubusercontent.com/xgdwudi/images/master/img/image-20220208222437378.png)

  **一对多关系**（one-to-many）

  - 常见实例场景：客户表和订单表，I类表和商品表，部门表和员工表举例

    - 员工表：编号、姓名、…、所属部门
    - 部门表：编号、名称、简介

    一对多建表原则：在从表（多方）创建一个字段，字段作为外键指向主表一方）的主键

  ![image-20220208222536988](https://raw.githubusercontent.com/xgdwudi/images/master/img/image-20220208222536988.png)

  **多对多**（many-to-many）

  要表示多对多关系，必须创建第三个表，该表通常称为联接表，它将多对多关系划分为两个一对多关系。将这两个表的主键都插入到第三个表中。

**自我引用**（Self reference）

![image-20220208222904321](https://raw.githubusercontent.com/xgdwudi/images/master/img/image-20220208222904321.png)

## mysql环境搭建

安装不做介绍，此处采用docker安装

# SQL之select 使用篇

## **SQL分类**

#### DDL: 数据定义语言

create  \  alter \  drop \ rename \ truncate 

#### DML:数据操作语言

insert \ delete \ update \ select

#### DCL：数据控制语言

COMMIT \ROLLBACK \SAVEPOINT (保存点)\GRANT\REVOKE

## SQL语言的规则和规范

### 基本规则

- sQL可以写在一行或者多行。为了提高可读性，各子句分行写，必要时使用缩进
- 每条命令以；或g或G结束

- 关键字不能被缩写也不能分行
- 关于标点符号
  - 必须保证所有的0、单引号、双引号是成对结束的
  - 必须使用英文状态下的半角输入方式
  - 字符串型和日期时间类型的数据可以使用单引号（"）表示
  - 列的别名，尽量使用双引号（""），而且不建议省略as

**sqL大小写规范（建议遵守）**

- MySQL在 Windows环境下是大小写不敏感的

- MySQL在 Linux环境下是大小写敏感的了

  - 数据库名、表名、表的别名、变量名是严格区分大小写的
  - 关键字、函数名、列名國或字段名）、列的别名（字段的别名）是忽略大小写的。

  推荐采用统一的书写规范：

  - 数据库名、表名、表别名、字段名、字段别名等都小写
  - sQL关键字、函数名、绑定变量等都大写

导入现有数据

方式一

source 文件全路径名

方式二

基于具体的图形化界面来进行导入





## 基本的SELECT语句

select 2+2 from dual;   dual 伪表

## 4大类运算符

## 排序与分页

## 多表查询

## 单行函数

## 聚合函数

## 子查询

# SQL之DDL、DML、DCL使用篇

## 创建和管理库

## 创建和管理表

## 数据处理之增删改

## MySQL数据类型精讲

## 约束

# 其他数据库对象篇

## 视图

## 存储过程与函数

## 变量、流程控制于游标

## 触发器

# MySQL8.0其他特性

## 窗口函数

## 公用表表达式

# MySQL架构篇

# 索引及调优篇

# 事务篇

# 日志与备份篇